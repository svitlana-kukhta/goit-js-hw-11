{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js"],"sourcesContent":["'use strict';\n/*import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst API_KEY = `46284520-d906981dc6cb4e25f7cb86bba`;\nconst BASE_URL = `https://pixabay.com/api/`;\nconst PROXY_URL = \"https://cors-anywhere.herokuapp.com/\";\n\nconst searchInput = document.querySelector('#search-input');\nconst fetchSearchBtn = document.querySelector(\".btn\");\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nconst options = {\n  method: 'GET',\n  headers: {\n    'Cache-Control': 'no-cache', // Заборонити використання кешу\n    'Pragma': 'no-cache', // Забороняє кешування в старих браузерах\n  }\n};\nlet lightbox;\nlet requestCount = 0; // Лічильник запитів\n// Функція для отримання зображень\nfunction fetchImages() {requestCount++;\n  console.log(`Кількість запитів: ${requestCount}`);\n  \n  const searchQuery = searchInput.value.trim(); // Отримуємо значення запиту\n  if (!searchQuery) {\n    iziToast.error({ title: 'Error', message: 'Please enter a search query!' });\n    return; // Виходимо, якщо немає запиту\n  }\n\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n\n  const url = `${PROXY_URL}${BASE_URL}?${searchParams.toString()}`;  \n  console.log(`Надсилається запит на URL: ${url}`); // Перевірка URL запиту\n\n  gallery.innerHTML = ''; \n  loader.style.display = 'block';\n\n  fetch(url, options)\n    .then(response => {console.log('Отримана відповідь:', response);\n      if (!response.ok) {\n        console.error(`HTTP error! status: ${response.status}`);\n        throw new Error(`HTTP error! status: ${response.status}`);\n       }\n      return response.json();\n      console.log(data)\n    })\n    .then(data => {\n      loader.style.display = 'none';\n      // Перевірка наявності зображень у відповіді\n      if (data.hits && data.hits.length > 0) {\n         iziToast.hide();\n      // Додавання зображень до галереї\n      data.hits.forEach(hit => {\n        const linkElement = document.createElement('a');\n        linkElement.href = hit.largeImageURL;\n\n        linkElement.setAttribute('rel', 'noopener noreferrer');\n        linkElement.setAttribute('target', '_blank');\n        \n        const imgElement = document.createElement('img');\n        imgElement.src = hit.webformatURL;\n        imgElement.alt = hit.tags;\n\n         const infoDiv = document.createElement('div');\n        infoDiv.classList.add('image-info');\n        infoDiv.innerHTML = `\n          <p><strong>Likes:</strong> ${hit.likes}</p>\n          <p><strong>Views:</strong> ${hit.views}</p>\n          <p><strong>Comments:</strong> ${hit.comments}</p>\n          <p><strong>Downloads:</strong> ${hit.downloads}</p>\n        `;\n\n        linkElement.appendChild(imgElement);\n        linkElement.appendChild(infoDiv);\n        gallery.appendChild(linkElement);\n      });\n\n      // Активуємо SimpleLightbox після додавання зображень\n      lightbox = new SimpleLightbox('.gallery a', { captionDelay: 250 });\n      lightbox.refresh();\n      } else {\n        // Якщо зображень немає\n        iziToast.show({ message: 'No images found for your query. Please try another search.' });\n      }\n    })\n  \n    .catch(error => {loader.style.display = 'none'; // Сховуємо лоадер в разі помилки\n      console.error('Помилка запиту:', error.message); // Логування помилки\n      iziToast.error({ title: 'Error', message: `Sorry, there was an error with your request: ${error.message}` });\n    });\n}\n\n// Додаємо слухача подій до кнопки\nfetchSearchBtn.addEventListener(\"click\", (event) => {\n  event.preventDefault(); // Зупиняємо стандартну поведінку форми\n  fetchImages(); // Викликаємо функцію для отримання зображень\n});*/\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst API_KEY = `46284520-d906981dc6cb4e25f7cb86bba`;\nconst BASE_URL = `https://pixabay.com/api/`;\nconst PROXY_URL = \"https://cors-anywhere.herokuapp.com/\";\n\nconst searchInput = document.querySelector('#search-input');\nconst fetchSearchBtn = document.querySelector(\".btn\");\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nconst options = {\n  method: 'GET',\n  headers: {\n    'Cache-Control': 'no-cache',\n    'Pragma': 'no-cache',\n  },\n};\n\nlet lightbox; // Оголошення змінної для lightbox\n\n// Функція для отримання зображень\nfunction fetchImages() {\n  const searchQuery = searchInput.value.trim();\n  if (!searchQuery) {\n    iziToast.show({ message: 'Please try again!' });\n    return;\n  }\n\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n\n  const url = `${PROXY_URL}${BASE_URL}?${searchParams.toString()}`;\n  console.log(`Надсилається запит на URL: ${url}`);\n\n  gallery.innerHTML = '';\n  loader.style.display = 'block';\n\n  fetch(url, options)\n    .then(response => {\n      if (!response.ok) {\n        console.log('Отримана відповідь:', response);\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return response.json();\n    })\n    .then(data => {\n      loader.style.display = 'none';\n\n      if (!data.hits || data.hits.length === 0) {\n        iziToast.show({ message: 'No images found for your query. Please try another search.' });\n        return;\n      }\n\n      // Додавання зображень до галереї\n      data.hits.forEach(hit => {\n        const linkElement = document.createElement('a');\n        linkElement.href = hit.largeImageURL;\n\n        const imgElement = document.createElement('img');\n        imgElement.src = hit.webformatURL;\n        imgElement.alt = hit.tags;\n\n        const infoDiv = document.createElement('div');\n        infoDiv.classList.add('image-info');\n        infoDiv.innerHTML = `\n          <p><strong>Likes:</strong> ${hit.likes}</p>\n          <p><strong>Views:</strong> ${hit.views}</p>\n          <p><strong>Comments:</strong> ${hit.comments}</p>\n          <p><strong>Downloads:</strong> ${hit.downloads}</p>\n        `;\n\n        linkElement.appendChild(imgElement);\n        linkElement.appendChild(infoDiv);\n        gallery.appendChild(linkElement);\n      });\n\n      // Ініціалізація SimpleLightbox та виклик refresh\n      lightbox = new SimpleLightbox('.gallery a', { captionDelay: 250 });\n      lightbox.refresh();\n    })\n    .catch(error => {\n      loader.style.display = 'none';\n      iziToast.error({ title: 'Error', message: 'Sorry, there are no images matching your search query. Please try again!' });\n    });\n}\n\n// Додаємо слухача подій до кнопки\nfetchSearchBtn.addEventListener(\"click\", (event) => {\n  event.preventDefault();\n  fetchImages();\n});\n\n\n"],"names":["API_KEY","BASE_URL","PROXY_URL","searchInput","fetchSearchBtn","gallery","loader","options","lightbox","fetchImages","searchQuery","iziToast","searchParams","url","response","data","hit","linkElement","imgElement","infoDiv","SimpleLightbox","error","event"],"mappings":"wvBAkHA,MAAMA,EAAU,qCACVC,EAAW,2BACXC,EAAY,uCAEZC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAiB,SAAS,cAAc,MAAM,EAC9CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAU,CACd,OAAQ,MACR,QAAS,CACP,gBAAiB,WACjB,OAAU,UACX,CACH,EAEA,IAAIC,EAGJ,SAASC,GAAc,CACrB,MAAMC,EAAcP,EAAY,MAAM,KAAI,EAC1C,GAAI,CAACO,EAAa,CAChBC,EAAS,KAAK,CAAE,QAAS,mBAAqB,CAAA,EAC9C,MACD,CAED,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAKZ,EACL,EAAGU,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,EAEKG,EAAM,GAAGX,CAAS,GAAGD,CAAQ,IAAIW,EAAa,SAAU,CAAA,GAC9D,QAAQ,IAAI,8BAA8BC,CAAG,EAAE,EAE/CR,EAAQ,UAAY,GACpBC,EAAO,MAAM,QAAU,QAEvB,MAAMO,EAAKN,CAAO,EACf,KAAKO,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,cAAQ,IAAI,sBAAuBA,CAAQ,EACrC,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAE1D,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKC,GAAQ,CAGZ,GAFAT,EAAO,MAAM,QAAU,OAEnB,CAACS,EAAK,MAAQA,EAAK,KAAK,SAAW,EAAG,CACxCJ,EAAS,KAAK,CAAE,QAAS,4DAA8D,CAAA,EACvF,MACD,CAGDI,EAAK,KAAK,QAAQC,GAAO,CACvB,MAAMC,EAAc,SAAS,cAAc,GAAG,EAC9CA,EAAY,KAAOD,EAAI,cAEvB,MAAME,EAAa,SAAS,cAAc,KAAK,EAC/CA,EAAW,IAAMF,EAAI,aACrBE,EAAW,IAAMF,EAAI,KAErB,MAAMG,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAU,IAAI,YAAY,EAClCA,EAAQ,UAAY;AAAA,uCACWH,EAAI,KAAK;AAAA,uCACTA,EAAI,KAAK;AAAA,0CACNA,EAAI,QAAQ;AAAA,2CACXA,EAAI,SAAS;AAAA,UAGhDC,EAAY,YAAYC,CAAU,EAClCD,EAAY,YAAYE,CAAO,EAC/Bd,EAAQ,YAAYY,CAAW,CACvC,CAAO,EAGDT,EAAW,IAAIY,EAAe,aAAc,CAAE,aAAc,GAAG,CAAE,EACjEZ,EAAS,QAAO,CACtB,CAAK,EACA,MAAMa,GAAS,CACdf,EAAO,MAAM,QAAU,OACvBK,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,0EAA0E,CAAE,CAC5H,CAAK,CACL,CAGAP,EAAe,iBAAiB,QAAUkB,GAAU,CAClDA,EAAM,eAAc,EACpBb,GACF,CAAC"}